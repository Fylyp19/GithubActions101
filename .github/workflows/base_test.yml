name: BaseTest

on:
  push:
    branches: [master]

      
jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Set up JDK 17
        uses: actions/setup-java@v3
        with:
          java-version: '17'
          distribution: 'adopt'
      - name: Grant execute permission for gradlew
        run: chmod +x gradlew
      - name: Set Inputs
        id: set_inputs
        run: |
         echo "param1=2" >> input.properties
         echo "param2=2" >> input.properties
         echo "param3=4" >> input.properties

      - name: Show Inputs
        run: |
         cat input.properties

      - name: Run Tests
        run: |
         param1=$(grep 'param1' input.properties | cut -d'=' -f2)
         param2=$(grep 'param2' input.properties | cut -d'=' -f2)
         param3=$(grep 'param3' input.properties | cut -d'=' -f2)
         ./gradlew test --tests CalculatorTest \
          -Dparam1=$param1 \
          -Dparam2=$param2 \
          -Dparam3=$param3